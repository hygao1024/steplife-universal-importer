<p align="center">
	<strong>用最快的方式，将三方数据轨迹导入到「一生足迹」中</strong>
</p> 
<h1 align="center">一生足迹数据导入器</h1>


## 1. 项目简介

**一生足迹数据导入器** 是一个便捷的数据转换工具，支持将第三方轨迹数据（如奥维互动地图、KML 等）快速转换为一生足迹 App 所需的 CSV 格式，帮助你更完整地记录旅途与人生的点点滴滴。

> 演示
> 
> ![](./static/images/demo.gif)

## 2. 前言

### 2.1 一生足迹 · 记录一生轨迹

> 你好，
我是足迹的开发者。<br>
2017 年的清明节（17.4.4），我和同事去了一次沙漠，徒步 12 小时，25.7 公里，我们穿越了中国第七大沙漠库布其。
这次旅行很累，也让我记忆深刻。<br>
在回北京的路上有人在群里问，我们是从哪儿走到哪儿的？<br>
可遗憾的是，没有一个人能准确说出。<br>
突然我就感觉挺悲哀的。<br>
也许我的一生也会这样，不管经历多少，遭遇了多少，到最后，都会被淡忘。没有人记得我们的过去。就像我们这次的旅行一样，很快就会被忘记。<br>
所以，我写了这个可以记录一生轨迹的 APP。<br>
—— By 足迹开发者

这是一款专注于个人轨迹记录的 App。多次获得 Apple App Store 推荐，数据完全保存在本地，无服务器、无广告、隐私安全可靠。

虽然一生足迹的开发者在耗电控制与定位漂移优化方面做了大量努力，已经显著提升了使用体验，但在某些极端环境下，仍可能出现记录不完整的问题。

你是否也遇到过这样的场景：
- 高铁出行，信号差
- 飞机出行，轨迹中断
- 沙漠深山中，GPS 不稳定
- 手机电量不足
- ......

为了解决这些特殊场景下的记录缺失问题，「数据导入器」应运而生。

## 3. 核心特性

- ✅ 支持 **奥维互动地图** 的 Omap JSON 格式导入
- ✅ 支持 **标准 KML 文件格式** 的轨迹导入
- ✅ 支持 **标准 GPX 文件格式** 的轨迹导入
- ✅ 一键转换为一生足迹所需的 CSV 格式  
- ✅ 无需联网，安全可靠  
- ✅ 轨迹合并功能
- 🛠️ 未来将支持「飞常准」等更多格式

## 4. 高级特性

### 4.1 配置概览

本项目支持一系列配置选项，帮助用户根据需求调整轨迹处理与路径优化的参数。以下是各配置项的详细说明：

```ini
# 是否启用插点策略。0: 不启用；1: 启用。缺省值1
enableInsertPointStrategy = 1

# 插点间距。当两点间距离大于该值时，认为两点之间应该插点。单位：米。缺省值100。最小值30
insertPointDistance = 100

# 路径开始时间。格式：yyyy-MM-dd HH:mm:ss。缺省值为当前系统时间
# pathStartTime = 2018-01-01 00:00:00
```

#### 4.1.1 轨迹精度优化

为了增强轨迹的连贯性和可视效果，本项目在处理第三方轨迹数据时内置了轨迹补点算法。该算法会根据轨迹点之间的间距进行智能插点，确保数据的可视化效果更为平滑。

**功能说明：**

- 当轨迹中相邻两个点之间的距离超过设定的阈值（默认 100 米）时，程序会自动插入补点，使得轨迹在地图上更为平滑。
- 该功能特别适用于高铁、飞机等定位信号间断较长的场景。

**默认情况下，插点策略是启用的**，如果不需要自动补点，可通过调整配置关闭此功能。

🔧 **关闭轨迹补点的示例：**

```ini
# 是否启用插点策略。0: 不启用；1: 启用。缺省值1
enableInsertPointStrategy = 0

# 插点间距。当两点间距离大于该值时，认为两点之间应该插点。单位：米。缺省值100。最小值30
insertPointDistance = 100
```

📌 提示：插值点将采用直线插值方式生成，确保轨迹在地图上的视觉连续性，但不会对原始数据精度产生影响。

#### 4.1.2 自定义路径时间

该功能允许用户为路径设置自定义的开始时间。默认情况下，路径的开始时间将使用当前系统时间，但如果需要根据业务场景调整路径的起始时间，可以通过配置 `pathStartTime` 参数来实现。

**功能说明：**

- `pathStartTime` 支持自定义格式 `yyyy-MM-dd HH:mm:ss`，例如：`2018-01-01 00:00:00`。
- 如果该配置项未设置，则系统将默认使用当前时间作为路径开始时间。

**示例：**

```INI
# 自定义路径开始时间。格式：yyyy-MM-dd HH:mm:ss。缺省值为当前系统时间
pathStartTime = 2024-04-21 08:00:00
```

📌 **提示：** 设置自定义时间时，确保输入的时间格式正确，以避免解析错误。


## 5. 快速开始

### 5.1 下载工具

首先你需要[Releases 页面](https://github.com/hygao1024/steplife-universal-importer/releases)最新版本，然后解压到任意目录。
目录结构示例：

```bash
├── main                // 主程序
└── source_data         // 三方路径数据存放目录，当前支持 KML、GPX、Ovjsn 格式数据
```


## 6. 数据导入指南

### 6.1 导入奥维互动地图数据

>奥维互动地图，专业地理规划软件
>
>跨平台地图浏览器，支持 iOS (iPhone、iPad)、Android、Windows、macOS、Linux 等流行平台。
>
>拥有强大的设计功能与地理信息展现技术，可满足各行各业地理信息规划的需求。它不仅是您工作上的好帮手，也是您探索未知世界的更好伴侣。

#### 步骤说明：

`Step1.` 你需要下载奥维互动地图应用，下载地址：https://www.ovital.com/download/

`Step2.` 打开奥维互动地图应用，输入起点终点，选择你的路线后并双击，转换成轨迹并保存。具体操作如下图所示

![](./static/images/map_search.png)

![](./static/images/map_search2.png)

`Step3.` 点击左下角收藏夹，选中你的轨迹进行导出，导出格式请务必选择`Omap json格式`

![](./static/images/export_tracks.png)

`Step4.` 导出后的数据放置 `source_data` 目录下，

- `Mac用户`: 在对应目录中打开终端，输入 `./main` 即可。
```bash
./main
```

- `Windows用户`: 在对应目录中打开双击 `main.exe` 或者在终端输入 `./main.exe` 即可。
```bash
./main.exe
```

![](./static/images/exec.png)

`Step5.` 程序会生成的`ouput.csv`文件，导入手机中，打开选择选择一生足迹，即可完成数据录入



### 6.2 导入 KML、GPX 数据

>KML（Keyhole Markup Language）是一种基于 XML 的文件格式，用于描述地理空间数据。它最初由 Keyhole 公司开发，后被 Google 收购并广泛应用于 Google Earth 等地理信息系统中。KML 文件可以定义点、线、面、模型等地理要素，并支持三维可视化，非常适合用于毕业设计中展示三维立体图。
>
>
>
>GPX（GPS eXchange Format, GPS 交换格式）是一个 XML 格式，为应用软件设计的通用 GPS 数据格式。它可以用来描述路点、轨迹、路程。这个格式是免费的，可以在不需要付任何许可费用的前提下使用。它的标签保存位置，海拔和时间，可以用来在不同的 GPS 设备和软件之间交换数据。如查看轨迹、在照片的exif数据中嵌入地理数据。



`Step1.` 你可以从各类地图软件中获取KML数据，再次不做举例

`Step2.` 导出后的数据放置 `source_data` 目录下，在对应目录中打开终端，输入 `./main` 即可。

```bash
./main
```

`Step3.` 程序将生成 `output.csv`，可在手机中导入至一生足迹 App。



## 7. 注意事项

- 请确保文件格式正确，命名规范，以便程序正常识别
- 当前版本为命令行工具，后续将考虑支持图形界面
- 如有问题或建议，欢迎提交 [Issue](https://github.com/hygao1024/steplife-universal-importer/issues) 或者 [PR](https://github.com/hygao1024/steplife-universal-importer/pulls)



## 8. 致谢

感谢每一位愿意记录人生、珍视记忆的你。
如果你觉得项目有帮助，请点个 Star ⭐️！仓库地址：https://github.com/hygao1024/steplife-universal-importer
